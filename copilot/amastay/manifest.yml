# The manifest for the "amastay" service.
# Read the full specification for the "Load Balanced Web Service" type at:
#  https://aws.github.io/copilot-cli/docs/manifest/lb-web-service/

name: amastay
type: Load Balanced Web Service # Defines the service type as a load-balanced web service.

# HTTP configuration
http:
    path: "/" # Forward all requests to the service.
    healthcheck: "/health" # Specify a custom health check path.

# Container and service configuration
image:
    build: Dockerfile # Dockerfile to build the container image.
    port: 80 # The port exposed by your container.

cpu: 256 # CPU units for the task.
memory: 512 # Memory for the task in MiB.
platform: linux/x86_64 # Platform for the container. Change to arm64 if using ARM-based architecture.
count: 1 # Number of tasks to be running in the service.
exec: true # Enable exec command for running commands in the container.

# Networking configuration
network:
    connect: true # Enable Service Connect for intra-environment communication.

# Optional environment variables (commented out, can be used if needed)
# variables:
#   LOG_LEVEL: info

# Optional secrets from AWS Systems Manager Parameter Store (commented out)
# secrets:
#   GITHUB_TOKEN: GITHUB_TOKEN

# Overrides for specific environments
# environments:
#   test:
#     count: 2                    # Override the task count for the test environment.
#     deployment:
#       rolling: 'recreate'       # Faster deployments by stopping existing tasks before starting new ones.
