name: frontend-app
type: Load Balanced Web Service

http:
  path: "/"
  healthcheck:
    path: "/api/v1/health/check"
    healthy_threshold: 3
    unhealthy_threshold: 2
    timeout: 5
    interval: 30
  public:
    certificates:
      - arn:aws:acm:us-east-1:422220778159:certificate/d1259492-082d-4ad9-b641-b754caef46b5

image:
  build:
    dockerfile: ../../docker/DockerfileFrontend
    context: ../amastay-vue
  port: 80

cpu: 256
memory: 512
platform: linux/arm64
count: 1
exec: true
network:
  connect: true

environments:
  production:
    count: 2
    cpu: 512
    memory: 1024
    http:
      alias:
        - name: "app.amastay.ai"
          hosted_zone: Z09051732Y0SGEMJ22C94
    image:
      build:
        args:
          VITE_BASE_URL: https://api.amastay.ai

  staging:
    count: 1
    http:
      alias:
        - name: "staging-app.amastay.ai"
          hosted_zone: Z09051732Y0SGEMJ22C94
    image:
      build:
        args:
          VITE_BASE_URL: https://staging-api.amastay.ai

  develop:
    count: 1
    http:
      alias:
        - name: "develop-app.amastay.ai"
          hosted_zone: Z09051732Y0SGEMJ22C94
    image:
      build:
        args:
          VITE_BASE_URL: https://develop-api.amastay.ai
